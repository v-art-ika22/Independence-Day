<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Happy Independence Day</title>
  <style>
    :root{--saffron:#ff9933;--white:#ffffff;--green:#138808;--navy:#00008b}
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg,var(--saffron),var(--white),var(--green));
      text-align: center;
      color: #000;
      min-height:100vh;
      display:flex;align-items:center;justify-content:center;
    }
    .container {
      width:95%;max-width:900px;
      margin: 30px auto;
      background: rgba(255,255,255,0.92);
      padding: 28px;
      border-radius: 14px;
      box-shadow: 0 6px 30px rgba(0,0,0,0.18);
      position:relative;
      overflow:hidden;
    }
    h1 {
      font-size: 2.6em;
      margin: 6px 0 6px 0;
      color: var(--saffron);
      letter-spacing:1px;
    }
    h2 { color: var(--green); margin:0 0 10px 0 }
    p { font-size:1.05em; color:#222; margin:10px 0 18px 0 }

    .controls{display:flex;gap:12px;justify-content:center;margin-top:12px;flex-wrap:wrap}
    .btn{background:#fff;border:2px solid rgba(0,0,0,0.08);padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    .btn-primary{background:linear-gradient(90deg,var(--saffron),#ffb86b);border:none;color:#111}

    .flag {
      width:100%;max-width:760px;margin:22px auto;border-radius:8px;overflow:hidden;border:2px solid rgba(0,0,0,0.06);box-shadow:inset 0 -6px 18px rgba(0,0,0,0.04);
    }
    .stripe {height:80px;display:flex;align-items:center;justify-content:center}
    .saffron { background: var(--saffron); }
    .white { background: var(--white); position:relative }
    .green { background: var(--green); }

    /* Ashoka Chakra as inline SVG with 24 spokes */
    .ashoka-svg { width:72px;height:72px;display:block }
    .ashoka-svg circle{ fill: none; stroke: var(--navy); stroke-width:3 }
    .ashoka-svg line{ stroke: var(--navy); stroke-width:2; stroke-linecap:round }

    /* waving effect */
    .flag.wave { animation: wave 1.6s ease-in-out infinite; transform-origin: left center }
    @keyframes wave { 0%{transform:rotate(0deg)}50%{transform:rotate(0.4deg)}100%{transform:rotate(0deg)} }

    /* confetti */
    .confetti{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;overflow:hidden}
    .confetti-piece{position:absolute;opacity:0;will-change:transform,opacity}
    @keyframes fall{
      0%{transform:translateY(-20vh) rotate(0) scale(1);opacity:1}
      80%{opacity:1}
      100%{transform:translateY(110vh) rotate(720deg) scale(0.8);opacity:0}
    }

    /* personalize label */
    .meta{margin-top:8px;color:#444;font-size:0.95em}

    /* responsive */
    @media (max-width:540px){
      .stripe{height:60px}
      h1{font-size:1.8em}
    }
  </style>
</head>
<body>
  <div class="container" id="card">
    <h1 id="title">Happy Independence Day</h1>
    <h2 id="subtitle">ðŸ‡®ðŸ‡³ Let freedom ring â€” Jai Hind! ðŸ‡®ðŸ‡³</h2>
    <p id="message">May the tricolour always fly high and may our country thrive in peace and prosperity.</p>

    <div class="controls">
      <button class="btn btn-primary" id="celebrate">Celebrate ðŸŽ‰</button>
      <button class="btn" id="personalize">Personalize</button>
      <button class="btn" id="download">Download Card</button>
    </div>

    <div class="flag" id="flag">
      <div class="stripe saffron"></div>
      <div class="stripe white">
        <!-- Ashoka Chakra implemented as SVG with 24 spokes (blue lines) -->
        <svg class="ashoka-svg" viewBox="-50 -50 100 100" aria-hidden="true" role="img">
          <!-- outer circle -->
          <circle cx="0" cy="0" r="30"></circle>
          <!-- 24 spokes: each group rotates a line outward -->
          <g>
            <g transform="rotate(0)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(15)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(30)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(45)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(60)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(75)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(90)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(105)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(120)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(135)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(150)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(165)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(180)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(195)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(210)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(225)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(240)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(255)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(270)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(285)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(300)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(315)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(330)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
            <g transform="rotate(345)"><line x1="0" y1="0" x2="0" y2="-30"></line></g>
          </g>
          <!-- small inner circle -->
          <circle cx="0" cy="0" r="6" stroke-width="2"></circle>
        </svg>
      </div>
      <div class="stripe green"></div>
    </div>

    <div class="meta">Tip: Click "Personalize" to add a name or short dedication.</div>

    <div class="confetti" id="confetti-area" aria-hidden="true"></div>
  </div>

  <script>
    // Elements
    const celebrateBtn = document.getElementById('celebrate');
    const personalizeBtn = document.getElementById('personalize');
    const downloadBtn = document.getElementById('download');
    const confettiArea = document.getElementById('confetti-area');
    const card = document.getElementById('card');
    const flag = document.getElementById('flag');

    // Create tricolor confetti
    function launchConfetti(count = 70){
      const colors = ['var(--saffron)','var(--white)','var(--green)'];
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'confetti-piece';
        const size = Math.round(6 + Math.random()*12);
        el.style.width = size + 'px';
        el.style.height = Math.round(size*1.4) + 'px';
        el.style.left = Math.random()*100 + '%';
        el.style.top = -(Math.random()*20 + 10) + 'vh';
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.borderRadius = Math.random()>0.6? '2px':'50%';
        const delay = Math.random()*0.6;
        el.style.animation = `fall ${2.2 + Math.random()*1.2}s ${delay}s linear forwards`;
        confettiArea.appendChild(el);
        // cleanup
        setTimeout(()=> el.remove(), 4200);
      }
    }

    // Celebrate: confetti + flag wave
    celebrateBtn.addEventListener('click', ()=>{
      launchConfetti();
      flag.classList.add('wave');
      setTimeout(()=> flag.classList.remove('wave'), 2200);
    });

    // Personalize card (title / message)
    personalizeBtn.addEventListener('click', ()=>{
      const name = prompt('Enter a name or short dedication (e.g. "For Priya")');
      if(name !== null){
        const titleEl = document.getElementById('title');
        if(name.trim()===''){
          titleEl.textContent = 'Happy Independence Day';
        } else {
          titleEl.textContent = `Happy Independence Day, ${name.trim()}!`;
        }
      }
      const extra = prompt('Add a short personal message (leave blank to keep original)');
      if(extra !== null && extra.trim() !== ''){
        document.getElementById('message').textContent = extra.trim();
      }
    });

    // Download: export current card area as SVG snapshot
    downloadBtn.addEventListener('click', ()=>{
      // Serialize the card element to SVG via foreignObject
      const serializer = new XMLSerializer();
      // Clone card and inline styles to preserve look
      const clone = card.cloneNode(true);
      // remove confetti pieces from clone
      const conf = clone.querySelector('.confetti'); if(conf) conf.remove();

      // Inline computed styles for important elements (simple approach)
      function inlineStyles(sourceEl, targetEl){
        const cs = window.getComputedStyle(sourceEl);
        targetEl.setAttribute('style', cs.cssText);
        Array.from(sourceEl.children).forEach((ch,i)=>{
          if(targetEl.children[i]) inlineStyles(ch,targetEl.children[i]);
        });
      }
      const div = document.createElement('div');
      div.appendChild(clone);
      inlineStyles(card, clone);

      const svg = `<?xml version="1.0" encoding="utf-8"?>\n`+
        `<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'>`+
        `<foreignObject width='100%' height='100%'>${serializer.serializeToString(div)}</foreignObject></svg>`;

      const blob = new Blob([svg],{type:'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'independence-day-card.svg'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // Optional: keyboard shortcut (C) for confetti
    document.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='c'){ celebrateBtn.click(); } });
  </script>
</body>
</html>
